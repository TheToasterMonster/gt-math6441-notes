\chapter{Mar.~26 --- Cellular Homology}

\section{Cellular Homology}

\begin{definition}
  Let $X$ be a CW complex. Define the
  \emph{cellular chain groups}
  \[
    C_n^{\CW}(X) = \text{free abelian group generated by the $n$-cells $e_1^n, \dots, e_{\ell_n}^n$}.
  \]
  Let $f_i^n : \partial e_i^n \to X^{(n - 1)}$ be
  the attaching map for $e_i^n$. Let $e_i^n$ be an
  $n$-cell and $e_j^{n - 1}$ be an $(n - 1)$-cell.
  Let $g_{ij} : S^{n - 1} \to S^{n - 1}$ be
  the composition of the following maps:
  \begin{center}
    \begin{tikzcd}
      S^{n - 1} \ar[r, "\cong"] &
      \partial e_i^n \ar[r, "f_i^n"] & X^{(n - 1)}
      \ar[r, "q"] & X^{(n - 1)}/X^{(n - 2)} \ar[r, "\cong"]
                  & \bigvee_{\ell_{n - 1}} S^{n - 1} \ar[r, "p_j"] & S^{n - 1}
    \end{tikzcd}
  \end{center}
  Define the boundary map as follows:
  For $n > 1$, set
  \begin{align*}
    \partial_n^\CW : C_n^\CW(X)
    &\longrightarrow C_{n - 1}^\CW(X) \\
    e_i^n
    &\longmapsto \sum_{j = 1}^{\ell_{n - 1}} (\deg g_{ij}) e_j^{n - 1}
  \end{align*}
  and for $n = 1$, define
  $\partial_1^\CW e_i^1 = \partial e_i^1$
  where $\partial$ is the singular boundary map.
\end{definition}

\begin{remark}
  If $X$ has only one $0$-cell, then $\partial_1^\CW = 0$.
\end{remark}

\begin{theorem}\label{thm:cell-homology}
  We have $\partial_{n}^\CW \circ \partial_{n + 1}^\CW = 0$ and moreover,
  \[
    H_n(X) \cong \frac{\ker \partial_n^\CW}{\im \partial_{n + 1}^\CW}.
  \]
\end{theorem}

\begin{definition}
  Define the \emph{cellular homology groups}
  to be
  \[
    H_n^\CW(X) = \frac{\ker \partial_n^\CW}{\im \partial_{n + 1}^\CW}.
  \]
  The previous theorem says that
  $H_n(X) \cong H_n^\CW(X)$ if $X$ is a CW complex.
\end{definition}

\section{Computations of Cellular Homology}
\begin{example}
  Give the torus $T^2$ the CW complex structure
  with one $0$-cell $e_1^0$, two
  $1$-cells $e_1^1, e_2^1$, and one $2$-cell $e_1^2$.
  Viewing $T^2$ as a square with opposite sides
  identified (and pointing to the right and up),
  let $e_1^0$ be the bottom-left corner,
  $e_1^1$ and $e_1^2$ be the bottom and left sides,
  and $e_1^2$ be the interior of the square.
  So can we write the cellular chain complex as follows:
  \begin{center}
    \begin{tikzcd}[row sep=small]
      0 \ar[r] & C_2^\CW(T^2) \ar[r, "\partial_2^\CW"] & C_1^\CW(T^2) \ar[r, "\partial_1^\CW"] & C_0^\CW(T^2) \ar[r] & 0 \\
      & \Z = \langle e_1^2 \rangle \ar[u, equal] & \Z \oplus \Z = \langle e_1^1, e_2^1 \rangle \ar[u, equal] & \Z = \langle e_1^0 \rangle \ar[u, equal]
    \end{tikzcd}
  \end{center}
  Since $T^2$ has one $0$-cell, we have
  $\partial_1^\CW = 0$. To compute $\partial_2^\CW e_1^2$,
  note that the map $g_{11}$ is given by
  \begin{center}
    \begin{tikzcd}
      S^{1} \ar[r, "\cong"] &
      \partial e_1^2 \ar[r, "f_i^n"] & X^{(1)}
      \ar[r, "q"] & X^{(1)}/X^{(0)} \ar[r, "\cong"]
                  & e_1^2 \lor e_1^1 \ar[r, "p_j"] & e_1 \ar[r, "\cong"] & S^{1}
    \end{tikzcd}
  \end{center}
  Consider the points $x_1 = (1, 1 / 4)$ and
  $x_2 = (1, 3 / 4)$ on the boundary of the square,
  viewed as $[0, 1]^2 \subseteq \R^2$. These
  points are both mapped to the same point $y$ under
  $g_{11}$, and note that at $x_1$ the direction
  on $\partial e_1^2$ and $S^1 = e_1^1 / \partial e_1^1$
  agree while at $x_2$ they disagree.
  Thus from our previous computations, we
  see $\deg(g_{11}, x_1) = 1 = -\deg(g_{11}, x_2)$,
  so
  $\deg(g_{11}) = 0$.
  Similarly, $\deg g_{12} = 0$, and so
  $\partial_2^\CW = 0$. So
  \[
    H_n^\CW(T^2) = C_n^\CW(T^2) =
    \begin{cases}
      \Z & \text{if } n = 0, 2, \\
      \Z \oplus \Z & \text{if } n = 1, \\
      0 & \text{otherwise}.
    \end{cases}
  \]
\end{example}

\begin{exercise}
  Let $\Sigma_g$ be the surface of genus
  $g$. Use cellular homology to verify that
  \[
    H_n(\Sigma_g) =
    \begin{cases}
      \Z & \text{if } n = 0, 2, \\
      \bigoplus_{2g} \Z & \text{if } n = 1, \\
      0 & \text{otherwise}.
    \end{cases}
  \]
\end{exercise}

\begin{remark}
  Consider the following:
  \begin{enumerate}
    \item $H_k(X)$ has at most $\ell_k$ generators,
      in particular $H_k(X) = 0$ if
      $X$ has no $k$-cells.
    \item If $X$ has cells only in even dimensions,
      then $H_n(X) = C_n^\CW(X)$.
  \end{enumerate}
\end{remark}

\begin{example}
  Recall that $\C P^n$ has a CW decomposition
  with one cell in each even dimension between
  $0$ and $2n$, so
  \[
    H_n( \C P^n) =
    \begin{cases}
      \Z & \text{if } n = 0, 2, \dots, 2n, \\
      0 & \text{otherwise}.
    \end{cases}
  \]
\end{example}

\begin{example}
  Let $a, b$ be two circles and
  $X = (a \lor b) \cup (\text{two $2$-cells $e_1^2, e_2^2$})$,
  where $e_1^2$ is attached along $a^5 b^{-3}$
  and $e_2^2$ is attached along $b^3(ab)^{-2}$.
  As above, we get
  \begin{center}
    \begin{tikzcd}[row sep=small]
      C_2^\CW(X) \ar[r, "\partial_2^\CW"] & C_1^\CW(X) \ar[r, "\partial_1^\CW"] & C_0^\CW(X) \\
      \Z \oplus \Z = \langle e_1^2, e_2^2 \rangle \ar[u, equal] & \Z \oplus \Z = \langle a, b \rangle \ar[u, equal] & \Z \ar[u, equal]
    \end{tikzcd}
  \end{center}
  We can compute that
  $\partial_2^\CW e_1^2 = 5a - 3b$ and
  $\partial_2^\CW e_2^2 = -2a + b$, and so
  \[
    \partial_2^\CW =
    \begin{pmatrix}
      5 & -3 \\
      -2 & 1
    \end{pmatrix}.
  \]
  This matrix is invertible over $\Z$, so
  $\partial_2^\CW$ is an isomorphism. We already know
  $\partial_1^\CW = 0$, so
  \[
    H_k(X) =
    \begin{cases}
      \Z & \text{if } k = 0, \\
      0 & \text{otherwise}.
    \end{cases}
  \]
\end{example}

\begin{remark}
  Note that in the previous example, $X$ has the
  homology of a point. But $X$ is not contractible:
  One can use the van Kampen theorem to see that
  \[
    \pi_1(X, x_0) \cong
    \langle a, b | a^5 b^{-3}, b^3 (ab)^{-2} \rangle,
  \]
  which one can show is a group of order $120$.
  This shows that $\pi_1$ ``sees'' things that
  $H_k$ does not for any $k$ (of course, $H_k$
  also ``sees'' things $\pi_1$ cannot, e.g.
  $S^k$ is not contractible since $H_k(S^k) \ne 0$).
\end{remark}

\section{Proof of Cellular Homology}

\begin{lemma}
  If $X$ is a CW complex, then
  \begin{enumerate}
    \item If $\ell_k$ is the number of $k$-cells in $X$,
      then
      \[
        H_k(X^{(n)}, X^{(n - 1)}) = \begin{cases}
          \bigoplus_{\ell_k} \Z & \text{if } k = n, \\
          0 & \text{otherwise}.
        \end{cases}
      \]
    \item $H_k(X^{(n)}) = 0$ for all $k > n$.
    \item If $i : X^{(n)} \to X$ is the inclusion
      map, then $i_* : H_k(X^{(n)}) \to H_k(X)$ is an isomorphism
      for $k < n$.
  \end{enumerate}
\end{lemma}

\begin{proof}
  $(1)$ Note that $(X^{(n)}, X^{(n - 1)})$ is a good
  pair, so
  \[
    H_k(X^{(n)}, X^{(n - 1)}) \cong \widetilde H_k(X^{(n)}/X^{(n - 1)}) =
    H_k\left(\bigvee_{\ell_n} S^n\right),
  \]
  so the statement holds for $n \ge 1$. One can
  check the $n = 0$ separately as an exercise.

  $(2)$ We have the long exact sequence of a
  pair: For $k \ne n, n - 1$,
  \begin{center}
    \begin{tikzcd}[row sep=small]
      H_k(X^{(n)}, X^{(n - 1)}) \ar[r] & H_k(X^{(n - 1)})
      \ar[r] & H_K(X^{(n)}) \ar[r] & H_{k - 1}(X^{(n)}, X^{(n - 1)}) \\
      0 \ar[u, equal] & & 0 \ar[u, equal]
    \end{tikzcd}
  \end{center}
  so $H_k(X^{(n)}) \cong H_k(X^{(n - 1)})$ for $k \ne n, n - 1$.
  So for $k > n$, we have
  \[
    H_k(X^{(n)}) \cong H_k(X^{(n - 1)}) \cong \dots \cong H_k(X^{(0)}) = 0.
  \]
  $(3)$ If $k < n$, then
  \[
    H_k(X^{(n)}) \cong H_k(X^{(n + 1)}) \cong \dots
    \cong H_k(X^{(n + \ell)})
  \]
  for any $\ell$. So if $X$ is a finite-dimensional
  CW complex, then clearly
  $H_k(X^{(n)}) \cong H_k(X)$ (if instead $X$ is
  infinite-dimensional, then we need the fact that
  homology commutes with \emph{direct limits}).
\end{proof}

\begin{proof}[Proof of Theorem \ref{thm:cell-homology}]
  By the lemma, we know that
  $C_n^\CW(X) \cong H_n(X^{(n)}, X^{(n - 1)})$.
  Consider the long exact sequence of the
  triple $(X^{(n + 1)}, X^{(n)}, X^{(n - 1)})$:
  \begin{center}
    \begin{tikzcd}
      \dots \ar[r] & H_{n + 1}(X^{(n + 1)}, X^{(n - 1)})
      \ar[r] & H_{n + 1}(X^{(n + 1)}, X^{(n)})
      \ar[r, "d_{n + 1}"] & H_n(X^{(n)}, X^{(n - 1)}) \ar[r] & \dots
    \end{tikzcd}
  \end{center}
  We claim that $\partial_n^\CW = d_{n}$, which
  we will check later. We first see that the
  theorem follows from this claim: Consider the
  long exact sequence of $(X^{(n + 1)}, X^{(n)})$
  and $(X^{(n)}, X^{(n - 1)})$:
  \begin{center}
    \begin{tikzcd}[]
      & 0 \ar[d, equal] \\
      C_{n + 1}^\CW(X) \ar[d, equal] & H_n(X^{(n - 1)}) \ar[d] & H_n(X) \ar[d, equal] & 0 \ar[d, equal]\\
      H_{n + 1}(X^{(n + 1)}, X^{(n)}) \ar[dr, bend right=15, swap, "j_n \circ \partial_{n + 1}"]
      \ar[r, "\partial_{n + 1}"] & H_n(X^{(n)}) \ar[d, "j_n"]
      \ar[r] & H_n(X^{(n + 1)})
      \ar[r] & H_n(X^{(n + 1)}, X^{(n)}) \\
             & H_n(X^{(n), X^{(n - 1)}}) \ar[d, "\partial_n"] & C_n^\CW(X) \ar[l, equal] \\
             & H_{n - 1}(X^{(n - 1)})
    \end{tikzcd}
  \end{center}
  Show as an exercise that $j_n \circ \partial_{n + 1} = d_{n + 1}$.
  (Hint: This is just a diagram chase. One can see
  that the choices used to define $d_{n + 1}$ and
  $\partial_{n + 1}$ are the same.)
  Then we have
  \[
    d_n \circ d_{n + 1} = j_{n - 1} \circ \partial_n \circ j_n \circ \partial_{n + 1}
    = j_{n - 1} \circ 0 \circ \partial_{n + 1} = 0
  \]
  since $\partial_n, j_n$ are adjacent terms in
  the long exact sequence.
  So we can consider $\ker d_n / {\im d_{n + 1}}$.
  From the diagram above, we see
  that
  $H_n(X) = H_n(X^{(n)}) / {\im \partial_{n + 1}}$.
  Note that $j_n$ is injective, so we have
  \[
    \im \partial_{n + 1}
    \cong j_n (\im \partial_{n + 1})
    = \im (j_n \circ \partial_{n + 1})
    = \im d_{n + 1}.
  \]
  Since $j_{n - 1}$ is also injective, we also see that
  \[
    H_n(X^{(n)})
    \cong \im j_n = \ker \partial_n
    = \ker (j_{n - 1} \circ \partial_n)
    = \ker d_n.
  \]
  Then by the claim that
  $\partial_n^\CW = d_{n}$, we have
  \[
    H_n(X) \cong \frac{H_n(X^{(n)})}{\im \partial_{n + 1}}
    \cong \frac{\ker d_n}{\im d_{n + 1}}
    = \frac{\ker \partial_n^\CW}{\im \partial_{n + 1}^\CW},
  \]
  which proves the theorem. So it suffices
  to prove the claim.

  To prove the claim, note that $i : (e_i^n, \partial e_i^n) \to (X^{(n)}, X^{(n - 1)})$
  is given by an ``inclusion'' (technically the inclusion
  is into $X^{(n - 1)} \cup e_i^n$, which only
  becomes $X^{(n)}$ after taking a quotient).
  The induced map
  \begin{align*}
    i_* : H_k(e_i^n, \partial e_i^n)
    &\longrightarrow H_k(X^{(n)}, X^{(n - 1)}) \\
    \Z & \longrightarrow \bigoplus_{\ell_n} \Z
  \end{align*}
  is injective and maps $\Z$ to the factor corresponding
  to $e_i^n$. So we have the commutative diagram:
  \begin{center}
    \begin{tikzcd}
      H_n(e_i^n, \partial e_i^n) \ar[r, "\partial"] \ar[d, "i_*"] & H_{n - 1}(\partial e_i^n) \ar[d, "(f_i^n)_*"] \\
      H_n(X^{(n)}, X^{(n - 1)}) \ar[dr, bend right=15, swap, "d_n"] \ar[r, "\partial_n"] & H_{n - 1}(X^{(n - 1)}) \ar[d, "j_{n - 1}"] \\
      & H_{n - 1}(X^{(n - 1)}, X^{(n - 2)})
    \end{tikzcd}
  \end{center}
  So the generator of
  $C_n^\CW(X) \cong H_n(X^{(n)}, X^{(n - 1)})$
  corresponding to $e_i^n$ (i.e. $i_*(1)$) maps under
  $d_n$ to
  \[
    j_{n - 1} \circ (f_i^n)_*(0, \dots, 1, \dots, 0)
    \in H_{n - 1}(X^{(n - 1)}, X^{(n - 2)}),
  \]
  (the $1$ is in the $i$th factor). Then
  (the tuple denotes the coefficients of
  $e_1^{n - 1}, \dots, e_{\ell_{n - 1}}^{n - 1}$)
  \begin{align*}
    d_n(\text{generator corresponding to $e_i$})
    &= d_n \circ i(1)
    = j_{n - 1} \circ (f_i^n)_* \circ \partial (1) \\
    &= (\deg g_{i 1}, \deg g_{i 2}, \dots, \deg g_{i \ell_{n - 1}})
    = \partial_n^\CW(e_i^n),
  \end{align*}
  which proves the desired claim.
\end{proof}
